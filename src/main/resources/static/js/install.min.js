(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["install"],{"0b96":function(e,t,a){},c0a7:function(e,t,a){"use strict";a("0b96")},f8a7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"zfile-install"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"zfile-install-form",attrs:{rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0,"element-loading-text":"保存并初始化中."}},[a("div",{staticClass:"zfile-install-title box animate__animated animate__fadeIn"},[e._v("\n            Z-File\n            "),a("small",[e._v("Install")])]),a("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"siteName"}},[a("el-input",{attrs:{placeholder:"站点名称","prefix-icon":"el-icon-tickets"},model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}})],1),a("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"管理员账号","prefix-icon":"el-icon-user"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),a("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"管理员密码","prefix-icon":"el-icon-key"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),a("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"domain"}},[a("el-input",{attrs:{placeholder:"站点地址/域名","prefix-icon":"el-icon-link"},model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain","string"===typeof t?t.trim():t)},expression:"form.domain"}})],1),a("el-form-item",{staticClass:"zfile-install-enter"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确认")])],1)],1)],1)},n=[],s=a("fed1"),o=a.n(s),r={name:"Install",data:function(){return{form:{siteName:"",username:"",password:"",domain:window.location.protocol+"//"+window.location.host},loading:!1,rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}]}}},mounted:function(){var e=this;this.$http.get("is-installed").then((function(t){0!==t.data.code&&e.$router.push("/main")}))},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.loading=!1,!1;t.loading=!0;var a=t;t.$http.post("install",o.a.stringify(t.form)).then((function(e){t.loading=!1;var i=e.data;0===i.code?t.$message({message:"初始化成功",type:0===i.code?"success":"error",duration:1500,onClose:function(){a.$router.push("/main")}}):t.$message({message:i.msg,type:"error",duration:3e3,onClose:function(){a.$router.push("/main")}})}))}))}}},l=r,m=(a("c0a7"),a("5d22")),c=Object(m["a"])(l,i,n,!1,null,"3e291e0d",null);t["default"]=c.exports}}]);