(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["install"],{"0173":function(e,a,t){"use strict";t("af7d")},af7d:function(e,a,t){},f8a7:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullLoading,expression:"fullLoading"}],staticClass:"zfile-install"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"zfile-install-form",attrs:{rules:e.rules,model:e.form,"label-width":"auto","status-icon":!0,"element-loading-text":"保存并初始化中."}},[t("div",{staticClass:"zfile-install-title box animate__animated animate__fadeIn"},[e._v("\n            Z-File\n            "),t("small",[e._v("Install")])]),t("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"siteName"}},[t("el-input",{attrs:{placeholder:"站点名称","prefix-icon":"el-icon-tickets"},model:{value:e.form.siteName,callback:function(a){e.$set(e.form,"siteName",a)},expression:"form.siteName"}})],1),t("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"管理员账号","prefix-icon":"el-icon-user"},model:{value:e.form.username,callback:function(a){e.$set(e.form,"username","string"===typeof a?a.trim():a)},expression:"form.username"}})],1),t("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"password"}},[t("el-input",{attrs:{placeholder:"管理员密码","prefix-icon":"el-icon-key"},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password","string"===typeof a?a.trim():a)},expression:"form.password"}})],1),t("el-form-item",{staticClass:"box animate__animated animate__fadeInUp",attrs:{prop:"domain"}},[t("el-input",{attrs:{placeholder:"站点地址/域名","prefix-icon":"el-icon-link"},model:{value:e.form.domain,callback:function(a){e.$set(e.form,"domain","string"===typeof a?a.trim():a)},expression:"form.domain"}})],1),t("el-form-item",{staticClass:"zfile-install-enter"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.submitForm("form")}}},[e._v("确认")])],1)],1)],1)},n=[],s=t("fed1"),o=t.n(s),r={name:"Install",data:function(){return{fullLoading:!1,form:{siteName:"",username:"",password:"",domain:""},loading:!1,rules:{siteName:[{required:!0,message:"请输入站点名称",trigger:"change"}],username:[{required:!0,message:"请输入管理员账号",trigger:"change"}],password:[{required:!0,message:"请输入管理员密码",trigger:"change"}],domain:[{required:!0,type:"url",message:"请输入正确的域名，需以 http:// 或 https:// 开头",trigger:"change"}]}}},mounted:function(){var e=this;this.form.domain=""===this.$http.defaults.baseURL?window.location.origin:this.$http.defaults.baseURL,this.fullLoading=!0,this.$http.get("is-installed").then((function(a){0!==a.data.code&&e.$router.push("/main"),e.fullLoading=!1}))},methods:{submitForm:function(e){var a=this;this.$refs[e].validate((function(e){if(!e)return a.loading=!1,!1;a.loading=!0;var t=a;a.$http.post("install",o.a.stringify(a.form)).then((function(e){a.loading=!1;var i=e.data;0===i.code?a.$message({message:"初始化成功",type:0===i.code?"success":"error",duration:1500,onClose:function(){t.$router.push("/main")}}):a.$message({message:i.msg,type:"error",duration:3e3,onClose:function(){t.$router.push("/main")}})}))}))}}},l=r,m=(t("0173"),t("5d22")),d=Object(m["a"])(l,i,n,!1,null,"66213dd3",null);a["default"]=d.exports}}]);